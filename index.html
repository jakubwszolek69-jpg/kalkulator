<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kalkulator PV</title>
  <style>
    body { font-family: sans-serif; max-width: 600px; margin: 40px auto; }
    label { display: block; margin-top: 16px; }
    input { width: 100%; padding: 8px; margin-top: 4px; }
    button { margin-top: 20px; padding: 10px 20px; border-radius: 8px; cursor: pointer; }
    #result { margin-top: 24px; font-size: 1.2rem; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Kalkulator Fotowoltaiczny (PV)</h1>
  <p>Wprowadź miesięczny rachunek za prąd, wybierz typ obiektu, miejsce montażu oraz moc instalacji.</p>

  <label>Miesięczny rachunek za prąd (zł):
    <input id="bill" type="number" placeholder="np. 300" />
  </label>

  <label>Typ obiektu:
    <select id="type">
      <option value="dom">Dom jednorodzinny</option>
      <option value="firma">Firma</option>
      <option value="gospodarstwo">Gospodarstwo rolne</option>
    </select>
  </label>

  <label>Miejsce montażu:
    <select id="mount" onchange="toggleRoofType()">
      <option value="dach">Dach</option>
      <option value="grunt">Grunt</option>
    </select>
  </label>

  <label id="roofTypeLabel">Rodzaj pokrycia dachu:
    <select id="roofType">
      <option value="blacha">Blacha</option>
      <option value="dachowka">Dachówka</option>
    </select>
  </label>

  <label>Turbina wiatrowa:
    <select id="turbine">
      <option value="0">Brak turbiny</option>
      <option value="3">3 kW</option>
      <option value="6">6 kW</option>
    </select>
  </label>

  <label>Rabat / Marża (%):
    <input id="margin" type="number" placeholder="np. 10" />
  </label>

  <label>Magazyn energii (kWh):
    <select id="battery">
      <option value="0">Brak magazynu</option>
      <option value="5">5 kWh</option>
      <option value="10">10 kWh</option>
      <option value="15">15 kWh</option>
      <option value="20">20 kWh</option>
      <option value="25">25 kWh</option>
      <option value="30">30 kWh</option>
      <option value="35">35 kWh</option>
      <option value="40">40 kWh</option>
      <option value="45">45 kWh</option>
      <option value="50">50 kWh</option>
    </select>
  </label>

  <label>Wybrana moc instalacji (kW):
    <input id="power" type="number" placeholder="np. 5" />
  </label>

  <button onclick="calculate()">Oblicz</button>

  <div id="result"></div>

  <script>
    function calculate() {
      const bill = parseFloat(document.getElementById('bill').value);
      const type = document.getElementById('type').value;
      const mount = document.getElementById('mount').value;
      const roofType = document.getElementById('roofType')?.value;
      const power = parseFloat(document.getElementById('power').value);
      const battery = parseFloat(document.getElementById('battery').value);
      const turbine = document.getElementById('turbine').value;

      if (!bill || !power) {
        document.getElementById('result').innerText = "Uzupełnij wszystkie pola.";
        return;
      }

      const suggestedPower = (bill * 0.0225).toFixed(2);

      const pvPrice = power * 2500;
      const batteryPrice = battery * 1200;
      const turbinePrice = turbine === "3" ? 12000 : turbine === "6" ? 24000 : 0;
      const total = pvPrice + batteryPrice + turbinePrice;

      document.getElementById('result').innerText = `Rachunek: ${bill} zł/mies.
Typ obiektu: ${type}
Montaż: ${mount}${mount === 'dach' ? ', pokrycie: ' + roofType : ''}
Wybrana moc: ${power} kW
Sugerowana moc instalacji: ${suggestedPower} kW
Magazyn energii: ${battery} kWh
Turbina wiatrowa: ${turbine} kW
Koszt instalacji PV: ${pvPrice} zł
Koszt magazynu energii: ${batteryPrice} zł
Koszt turbiny: ${turbinePrice} zł
Łączny koszt: ${total} zł
Cena po rabacie / marży: ${(total - (total * (parseFloat(document.getElementById('margin').value)||0) / 100)).toFixed(2)`;
    }

    function toggleRoofType() {
      const mount = document.getElementById('mount').value;
      document.getElementById('roofTypeLabel').style.display = mount === 'dach' ? 'block' : 'none';
    }
  </script>
</body>
</html>
